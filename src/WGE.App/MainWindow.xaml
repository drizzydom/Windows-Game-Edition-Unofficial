<Window x:Class="WGE.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Windows Game Edition (Unofficial)"
        Width="1000"
        Height="650"
        MinWidth="900"
        MinHeight="600">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="200" />
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#20232a" Padding="20">
            <StackPanel Orientation="Vertical">
                <TextBlock Text="Windows Game Edition (Unofficial)" FontSize="24" FontWeight="Bold" Foreground="White" />
                <TextBlock Text="Pick a preset, review the tweaks, then apply them with a single click. Everything can be undone thanks to paired commands." Foreground="White" Margin="0,8,0,0" />
            </StackPanel>
        </Border>

        <Grid Grid.Row="1" Margin="10,15,10,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="260" />
                <ColumnDefinition Width="6" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" BorderBrush="#3c4049" BorderThickness="1" CornerRadius="6" Padding="10">
                <DockPanel>
                    <TextBlock Text="Presets" DockPanel.Dock="Top" FontWeight="Bold" FontSize="16" Margin="0,0,0,10" />
                    <ListBox x:Name="ManifestList"
                             DisplayMemberPath="DisplayName"
                             SelectionChanged="ManifestList_OnSelectionChanged" />
                </DockPanel>
            </Border>

            <GridSplitter Grid.Column="1" Width="6" Margin="4,0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="#3c4049" />

            <Border Grid.Column="2" BorderBrush="#3c4049" BorderThickness="1" CornerRadius="6" Padding="14" Background="#111318">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0" Orientation="Vertical">
                        <TextBlock x:Name="PresetTitle" Text="Select a preset to see details" FontSize="20" FontWeight="Bold" Foreground="White" />
                        <TextBlock x:Name="PresetDescription" Text="" Foreground="#cfd2da" Margin="0,4,0,0" TextWrapping="Wrap" />
                        <TextBlock x:Name="PresetMeta" Text="" Foreground="#9ba0b2" Margin="0,4,0,0" />
                    </StackPanel>

                    <DataGrid Grid.Row="2"
                              x:Name="TweaksGrid"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False"
                              IsReadOnly="True"
                              Margin="0,12,0,12"
                              HeadersVisibility="Column"
                              AlternatingRowBackground="#1c1f26"
                              RowBackground="Transparent"
                              Foreground="White"
                              GridLinesVisibility="None"
                              Background="Transparent">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Tweak" Binding="{Binding Name}" Width="200" />
                            <DataGridTextColumn Header="Category" Binding="{Binding Category}" Width="140" />
                            <DataGridTextColumn Header="Impact" Binding="{Binding DefaultBehavior}" Width="*">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="TextWrapping" Value="Wrap" />
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="When Disabled" Binding="{Binding WhenDisabled}" Width="*">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="TextWrapping" Value="Wrap" />
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="Risk" Binding="{Binding RiskLevel}" Width="80" />
                            <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="100" />
                            <DataGridTextColumn Header="Status Details" Binding="{Binding StatusDetails}" Width="2*">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="TextWrapping" Value="Wrap" />
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                        </DataGrid.Columns>
                    </DataGrid>

                    <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button x:Name="DryRunButton" Content="Preview Actions" Padding="16,8" Margin="0,0,10,0" Click="DryRunButton_OnClick" />
                        <Button x:Name="ApplyButton" Content="Apply Preset" Padding="16,8" Background="#0b8457" Foreground="White" Click="ApplyButton_OnClick" />
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>

        <Border Grid.Row="2" Margin="10,0,10,10" BorderBrush="#3c4049" BorderThickness="1" CornerRadius="6" Background="#111318" Padding="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Text="Session log" FontWeight="Bold" Foreground="White" />
                <TextBox Grid.Row="1"
                         x:Name="LogBox"
                         IsReadOnly="True"
                         TextWrapping="Wrap"
                         Background="Transparent"
                         Foreground="#cfd2da"
                         BorderThickness="0"
                         AcceptsReturn="True"
                         VerticalScrollBarVisibility="Auto"
                         Margin="0,6,0,12"
                         MinHeight="70" />

                <TextBlock Grid.Row="2" Text="Action breakdown" FontWeight="Bold" Foreground="White" />
                <DataGrid Grid.Row="3"
                          x:Name="ResultGrid"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False"
                          IsReadOnly="True"
                          Margin="0,6,0,0"
                          HeadersVisibility="Column"
                          AlternatingRowBackground="#1c1f26"
                          RowBackground="Transparent"
                          Foreground="White"
                          GridLinesVisibility="None"
                          Background="Transparent">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="80" />
                        <DataGridTextColumn Header="Tweak" Binding="{Binding TweakName}" Width="180" />
                        <DataGridTextColumn Header="Target" Binding="{Binding Target}" Width="220" />
                        <DataGridTextColumn Header="Message" Binding="{Binding Message}" Width="*" />
                        <DataGridTextColumn Header="Details" Binding="{Binding Details}" Width="*" />
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Border>
    </Grid>
</Window>
